<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>A Robust Interface to ArcGIS Geocoding Services • arcgisgeocode</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="A Robust Interface to ArcGIS Geocoding Services">
<meta name="description" content="A very fast and robust interface to ArcGIS Geocoding Services. Provides capabilities for reverse geocoding, finding address candidates, character-by-character search autosuggestion, and batch geocoding. The public ArcGIS World Geocoder is accessible for free use via arcgisgeocode for all services except batch geocoding. arcgisgeocode also integrates with arcgisutils to provide access to custom locators or private ArcGIS World Geocoder hosted on ArcGIS Enterprise. Learn more in the Geocode service API reference &lt;https://developers.arcgis.com/rest/geocode/api-reference/overview-world-geocoding-service.htm&gt;.">
<meta property="og:description" content="A very fast and robust interface to ArcGIS Geocoding Services. Provides capabilities for reverse geocoding, finding address candidates, character-by-character search autosuggestion, and batch geocoding. The public ArcGIS World Geocoder is accessible for free use via arcgisgeocode for all services except batch geocoding. arcgisgeocode also integrates with arcgisutils to provide access to custom locators or private ArcGIS World Geocoder hosted on ArcGIS Enterprise. Learn more in the Geocode service API reference &lt;https://developers.arcgis.com/rest/geocode/api-reference/overview-world-geocoding-service.htm&gt;.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">arcgisgeocode</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-arcgis/arcgisgeocode/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="arcgisgeocode">arcgisgeocode<a class="anchor" aria-label="anchor" href="#arcgisgeocode"></a>
</h1></div>
<!-- badges: start -->

<p>arcgisgeocode provides access to ArcGIS geocoding services from R. It supports address candidate identification, batch geocoding, reverse geocoding, and autocomplete suggestions.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install the package from CRAN</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install from CRAN </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"arcgisgeocode"</span><span class="op">)</span></span></code></pre></div>
<p>You can also install the development version from r-universe as a binary for Mac, Windows, or Ubuntu from r-universe like so:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install from R-universe</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"arcgisgeocode"</span>, repos <span class="op">=</span> <span class="st">"https://r-arcgis.r-universe.dev"</span><span class="op">)</span></span></code></pre></div>
<p>Or you can install the package from source which requires Rust to be available. Follow the <a href="https://rustup.rs/" class="external-link">rustup instructions</a> to install Rust and verify your installation is compatible using <a href="https://extendr.github.io/rextendr/dev/#sitrep" class="external-link"><code>rextendr::rust_sitrep()</code></a>. Then install the development version from GitHub:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install pak if not available</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"pak"</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"pak"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># install development version of {arcgisgeocode}</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"r-arcgis/arcgisgeocode"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>By default, the <a href="https://www.esri.com/en-us/arcgis/products/arcgis-world-geocoder" class="external-link">ArcGIS World Geocoder</a> will be used. This geocoding server provides public access to the <a href="https://developers.arcgis.com/rest/geocode/api-reference/geocoding-find-address-candidates.htm" class="external-link"><code>/findAddressCandidates</code></a>, <a href="https://developers.arcgis.com/rest/geocode/api-reference/geocoding-reverse-geocode.htm" class="external-link"><code>/reverseGeocode</code></a>, and <a href="https://developers.arcgis.com/rest/geocode/api-reference/geocoding-suggest.htm" class="external-link"><code>/suggest</code></a> endpoints made available via the <code><a href="reference/find_address_candidates.html">find_address_candidates()</a></code>, <code><a href="reference/reverse_geocode.html">reverse_geocode()</a></code>, and <code><a href="reference/suggest_places.html">suggest_places()</a></code> functions respectively.</p>
<p>The batch geocoding endpoint <a href="https://developers.arcgis.com/rest/geocode/api-reference/geocoding-geocode-addresses.htm" class="external-link"><code>/geocodeAddresses</code></a> is available via <code><a href="reference/geocode_addresses.html">geocode_addresses()</a></code>. However, this requires the use of an authorization token and may consume credits.</p>
<p>Refer to the ArcGIS World Geocoder <a href="https://developers.arcgis.com/rest/geocode/api-reference/overview-world-geocoding-service.htm" class="external-link">official documentation</a> for additional information on use restrictions and licensing. For example, a valid token is required to <a href="#important-storing-results">store the results</a> of geocoding transactions.</p>
<div class="section level3">
<h3 id="reverse-geocoding">Reverse geocoding<a class="anchor" aria-label="anchor" href="#reverse-geocoding"></a>
</h3>
<p>Reverse geocoding takes a location and finds the associated address.</p>
<blockquote>
<p>[!TIP]</p>
<p>A token <em>is not required</em> to use this function.</p>
</blockquote>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-arcgis/arcgisgeocode" class="external-link">arcgisgeocode</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Find addresses from locations</span></span>
<span><span class="va">rev_res</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/reverse_geocode.html">reverse_geocode</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">117.172</span>, <span class="fl">34.052</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># preview results</span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">rev_res</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 1</span></span>
<span><span class="co">#&gt; Columns: 23</span></span>
<span><span class="co">#&gt; $ match_addr   &lt;chr&gt; "600-620 Home Pl, Redlands, California, 92374"</span></span>
<span><span class="co">#&gt; $ long_label   &lt;chr&gt; "600-620 Home Pl, Redlands, CA, 92374, USA"</span></span>
<span><span class="co">#&gt; $ short_label  &lt;chr&gt; "600-620 Home Pl"</span></span>
<span><span class="co">#&gt; $ addr_type    &lt;chr&gt; "StreetAddress"</span></span>
<span><span class="co">#&gt; $ type_field   &lt;chr&gt; ""</span></span>
<span><span class="co">#&gt; $ place_name   &lt;chr&gt; ""</span></span>
<span><span class="co">#&gt; $ add_num      &lt;chr&gt; "608"</span></span>
<span><span class="co">#&gt; $ address      &lt;chr&gt; "608 Home Pl"</span></span>
<span><span class="co">#&gt; $ block        &lt;chr&gt; ""</span></span>
<span><span class="co">#&gt; $ sector       &lt;chr&gt; ""</span></span>
<span><span class="co">#&gt; $ neighborhood &lt;chr&gt; "South Redlands"</span></span>
<span><span class="co">#&gt; $ district     &lt;chr&gt; ""</span></span>
<span><span class="co">#&gt; $ city         &lt;chr&gt; "Redlands"</span></span>
<span><span class="co">#&gt; $ metro_area   &lt;chr&gt; ""</span></span>
<span><span class="co">#&gt; $ subregion    &lt;chr&gt; "San Bernardino County"</span></span>
<span><span class="co">#&gt; $ region       &lt;chr&gt; "California"</span></span>
<span><span class="co">#&gt; $ region_abbr  &lt;chr&gt; "CA"</span></span>
<span><span class="co">#&gt; $ territory    &lt;chr&gt; ""</span></span>
<span><span class="co">#&gt; $ postal       &lt;chr&gt; "92374"</span></span>
<span><span class="co">#&gt; $ postal_ext   &lt;chr&gt; ""</span></span>
<span><span class="co">#&gt; $ country_name &lt;chr&gt; "United States"</span></span>
<span><span class="co">#&gt; $ country_code &lt;chr&gt; "USA"</span></span>
<span><span class="co">#&gt; $ geometry     &lt;POINT [°]&gt; POINT (-117.172 34.05204)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="address-search">Address search<a class="anchor" aria-label="anchor" href="#address-search"></a>
</h3>
<p>The <code><a href="reference/find_address_candidates.html">find_address_candidates()</a></code> function returns geocoding candidate results. The function is vectorized over the input and will perform multiple requests in parallel. Each request geocodes one location at a time.</p>
<p>One or more candidates are returned from the endpoint. You can limit the number of candidates using the <code>max_locations</code> argument (with a maximum of 50).</p>
<blockquote>
<p>[!TIP]</p>
<p>A token <em>is not required</em> to use this function.</p>
</blockquote>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Find addresses from address search</span></span>
<span><span class="va">candidates</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/find_address_candidates.html">find_address_candidates</a></span><span class="op">(</span></span>
<span>  address <span class="op">=</span> <span class="st">"esri"</span>,</span>
<span>  address2 <span class="op">=</span> <span class="st">"380 new york street"</span>,</span>
<span>  city <span class="op">=</span> <span class="st">"redlands"</span>,</span>
<span>  country_code <span class="op">=</span> <span class="st">"usa"</span>,</span>
<span>  max_locations <span class="op">=</span> <span class="fl">2</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">candidates</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 2</span></span>
<span><span class="co">#&gt; Columns: 11</span></span>
<span><span class="co">#&gt; $ input_id    &lt;int&gt; 1, 1</span></span>
<span><span class="co">#&gt; $ result_id   &lt;int&gt; NA, NA</span></span>
<span><span class="co">#&gt; $ loc_name    &lt;chr&gt; "World", "World"</span></span>
<span><span class="co">#&gt; $ status      &lt;chr&gt; "M", "M"</span></span>
<span><span class="co">#&gt; $ score       &lt;dbl&gt; 100.00, 98.57</span></span>
<span><span class="co">#&gt; $ match_addr  &lt;chr&gt; "Esri", "380 New York St, Redlands, California, 92373"</span></span>
<span><span class="co">#&gt; $ long_label  &lt;chr&gt; "Esri, 380 New York St, Redlands, CA, 92373, USA", "380 Ne…</span></span>
<span><span class="co">#&gt; $ short_label &lt;chr&gt; "Esri", "380 New York St"</span></span>
<span><span class="co">#&gt; $ addr_type   &lt;chr&gt; "POI", "PointAddress"</span></span>
<span><span class="co">#&gt; $ type_field  &lt;chr&gt; "Business Facility", NA</span></span>
<span><span class="co">#&gt; $ geometry    &lt;POINT [°]&gt; POINT (-117.1957 34.05609), POINT (-117.1948 34.05726)…</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="suggest-locations">Suggest locations<a class="anchor" aria-label="anchor" href="#suggest-locations"></a>
</h3>
<p>Geocoding services can also provide a location suggestion based on a search term and, optionally, a location or extent. The <code><a href="reference/suggest_places.html">suggest_places()</a></code> function (<code>/suggest</code> endpoint) is intended to be used as part of a client-facing application that provides autocomplete suggestions.</p>
<p>In this example we create a search extent around a single point and find suggestions based on the search term <code>"bellwood"</code>.</p>
<blockquote>
<p>[!TIP]</p>
<p>A token <em>is not required</em> to use this function.</p>
</blockquote>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># identify a search point as a simple feature column</span></span>
<span><span class="va">location</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span></span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">84.34</span>, <span class="fl">33.74</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">4326</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># buffer and create a bbox object to search within the extent</span></span>
<span><span class="va">search_extent</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_bbox.html" class="external-link">st_bbox</a></span><span class="op">(</span></span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_buffer</a></span><span class="op">(</span><span class="va">location</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># find suggestions within the bounding box</span></span>
<span><span class="va">suggestions</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/suggest_places.html">suggest_places</a></span><span class="op">(</span></span>
<span>  <span class="st">"bellwood"</span>,</span>
<span>  <span class="va">location</span>,</span>
<span>  search_extent <span class="op">=</span> <span class="va">search_extent</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">suggestions</span></span>
<span><span class="co">#&gt; # A data frame: 5 × 3</span></span>
<span><span class="co">#&gt;   text                                                   magic_key is_collection</span></span>
<span><span class="co">#&gt; * &lt;chr&gt;                                                  &lt;chr&gt;     &lt;lgl&gt;        </span></span>
<span><span class="co">#&gt; 1 Bellwood Coffee, 1366 Glenwood Ave SE, Atlanta, GA, 3… dHA9MCN0… FALSE        </span></span>
<span><span class="co">#&gt; 2 Bellwood, Atlanta, GA, USA                             dHA9MCN0… FALSE        </span></span>
<span><span class="co">#&gt; 3 Bellwood Church, Atlanta, GA, USA                      dHA9MCN0… FALSE        </span></span>
<span><span class="co">#&gt; 4 Bellwood Yard, Atlanta, GA, USA                        dHA9MCN0… FALSE        </span></span>
<span><span class="co">#&gt; 5 Bellwood, IL, USA                                      dHA9NCN0… FALSE</span></span></code></pre></div>
<p>The result is intended to be provided to <code><a href="reference/find_address_candidates.html">find_address_candidates()</a></code> to complete the geocoding process. The column <code>text</code> contains the address to geocode. The column <code>magic_key</code> is a special identifier that makes it much faster to fetch results. Pass this into the argument <code>magic_key</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get address candidate information</span></span>
<span><span class="co"># using the text and the magic key</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/find_address_candidates.html">find_address_candidates</a></span><span class="op">(</span></span>
<span>  <span class="va">suggestions</span><span class="op">$</span><span class="va">text</span>,</span>
<span>  magic_key <span class="op">=</span> <span class="va">suggestions</span><span class="op">$</span><span class="va">magic_key</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">res</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 7</span></span>
<span><span class="co">#&gt; Columns: 11</span></span>
<span><span class="co">#&gt; $ input_id    &lt;int&gt; 1, 2, 3, 4, 5, 5, 5</span></span>
<span><span class="co">#&gt; $ result_id   &lt;int&gt; NA, NA, NA, NA, NA, NA, NA</span></span>
<span><span class="co">#&gt; $ loc_name    &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA</span></span>
<span><span class="co">#&gt; $ status      &lt;chr&gt; "M", "M", "M", "M", "T", "T", "T"</span></span>
<span><span class="co">#&gt; $ score       &lt;dbl&gt; 100, 100, 100, 100, 100, 100, 100</span></span>
<span><span class="co">#&gt; $ match_addr  &lt;chr&gt; "Bellwood Coffee", "Bellwood, Atlanta, Georgia", "Bellwood…</span></span>
<span><span class="co">#&gt; $ long_label  &lt;chr&gt; "Bellwood Coffee, 1366 Glenwood Ave SE, Atlanta, GA, 30316…</span></span>
<span><span class="co">#&gt; $ short_label &lt;chr&gt; "Bellwood Coffee", "Bellwood", "Bellwood Church", "Bellwoo…</span></span>
<span><span class="co">#&gt; $ addr_type   &lt;chr&gt; "POI", "Locality", "POI", "POI", "Locality", "Locality", "…</span></span>
<span><span class="co">#&gt; $ type_field  &lt;chr&gt; "Snacks", "City", "Church", "Building", "City", "City", "C…</span></span>
<span><span class="co">#&gt; $ geometry    &lt;POINT [°]&gt; POINT (-84.34273 33.74034), POINT (-84.41243 33.77455), PO…</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="important-storing-results">
<em>Important</em>: Storing results<a class="anchor" aria-label="anchor" href="#important-storing-results"></a>
</h2>
<p>By default, the argument <code>for_storage = FALSE</code> meaning that the results of the geocoding operation cannot be persisted. If you intend to persist the results of the geocoding operation, you must set <code>for_storage = TRUE</code>.</p>
<p>To learn more about free and paid geocoding operations refer to the <a href="https://developers.arcgis.com/documentation/mapping-apis-and-services/geocoding/services/geocoding-service/#storage-parameter" class="external-link">storage parameter documentation</a>.</p>
</div>
<div class="section level2">
<h2 id="batch-geocoding">Batch geocoding<a class="anchor" aria-label="anchor" href="#batch-geocoding"></a>
</h2>
<p>Many addresses can be geocoded very quickly using the <code><a href="reference/geocode_addresses.html">geocode_addresses()</a></code> function which calls the <code>/geocodeAddresses</code> endpoint. Note that this function requires an authorization token. <code><a href="reference/geocode_addresses.html">geocode_addresses()</a></code> sends the input addresses in chunks as parallel requests.</p>
<p>Batch geocoding requires a signed in user. Load the <a href="https://github.com/r-arcgis/arcgisutils" class="external-link"><code>{arcgisutils}</code></a> to authorize and set your token. This example uses the <a href="#id_%20https://datacatalog.urban.org/node/6158/revisions/14192/view" class="external-link">Geocoding Test Dataset</a> from the <a href="https://www.urban.org/" class="external-link">Urban Institute</a>.</p>
<blockquote>
<p>[!TIP]</p>
<p>A token <em>is required</em> to use this function with the World Geocoding Service. It may not be necessary if you are using a private ArcGIS Enterprise service.</p>
</blockquote>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/R-ArcGIS/arcgisutils" class="external-link">arcgisutils</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-arcgis/arcgisgeocode" class="external-link">arcgisgeocode</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://r.esri.com/arcgisutils/reference/token.html" class="external-link">set_arc_token</a></span><span class="op">(</span><span class="fu"><a href="https://r.esri.com/arcgisutils/reference/auth.html" class="external-link">auth_user</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Example dataset from the Urban Institute</span></span>
<span><span class="va">fp</span> <span class="op">&lt;-</span> <span class="st">"https://urban-data-catalog.s3.amazonaws.com/drupal-root-live/2020/02/25/geocoding_test_data.csv"</span></span>
<span></span>
<span><span class="va">to_geocode</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu">read_csv</span><span class="op">(</span><span class="va">fp</span>, <span class="fu">readr</span><span class="fu">::</span><span class="fu">locale</span><span class="op">(</span>encoding <span class="op">=</span> <span class="st">"latin1"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">geocoded</span> <span class="op">&lt;-</span> <span class="va">to_geocode</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/reframe.html" class="external-link">reframe</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="reference/geocode_addresses.html">geocode_addresses</a></span><span class="op">(</span></span>
<span>      address <span class="op">=</span> <span class="va">address</span>,</span>
<span>      city <span class="op">=</span> <span class="va">city</span>,</span>
<span>      region <span class="op">=</span> <span class="va">state</span>,</span>
<span>      postal <span class="op">=</span> <span class="va">zip</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">res</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="using-other-locators">Using other locators<a class="anchor" aria-label="anchor" href="#using-other-locators"></a>
</h2>
<p><a href="https://github.com/r-arcgis/arcgisgeocode" class="external-link">arcgisgeocode</a> can be used with other geocoding services, including custom locators hosted on ArcGIS Online or Enterprise. For example, we can use the <a href="https://www.nconemap.gov/pages/addresses" class="external-link">AddressNC</a> geocoding service <a href="https://www.arcgis.com/home/item.html?id=247dfe30ec42476a96926ad9e35f725f" class="external-link">available on ArcGIS Online</a>.</p>
<p>Create a new <code>GeocodeServer</code> object using <code><a href="reference/geocode_server.html">geocode_server()</a></code>. This geocoder can be passed into the <code>geocoder</code> argument to any of the geocoding functions.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">address_nc</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/geocode_server.html">geocode_server</a></span><span class="op">(</span></span>
<span>  <span class="st">"https://services.nconemap.gov/secure/rest/services/AddressNC/AddressNC_geocoder/GeocodeServer"</span>,</span>
<span>  token <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/find_address_candidates.html">find_address_candidates</a></span><span class="op">(</span></span>
<span>  address <span class="op">=</span> <span class="st">"rowan coffee"</span>,</span>
<span>  city <span class="op">=</span> <span class="st">"asheville"</span>,</span>
<span>  geocoder <span class="op">=</span> <span class="va">address_nc</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">res</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 2</span></span>
<span><span class="co">#&gt; Columns: 11</span></span>
<span><span class="co">#&gt; $ input_id    &lt;int&gt; 1, 1</span></span>
<span><span class="co">#&gt; $ result_id   &lt;int&gt; NA, NA</span></span>
<span><span class="co">#&gt; $ loc_name    &lt;chr&gt; NA, NA</span></span>
<span><span class="co">#&gt; $ status      &lt;chr&gt; "T", "T"</span></span>
<span><span class="co">#&gt; $ score       &lt;dbl&gt; 78, 78</span></span>
<span><span class="co">#&gt; $ match_addr  &lt;chr&gt; "ASHEVILLE", "ASHEVILLE"</span></span>
<span><span class="co">#&gt; $ long_label  &lt;chr&gt; "ASHEVILLE", "ASHEVILLE"</span></span>
<span><span class="co">#&gt; $ short_label &lt;chr&gt; "ASHEVILLE", "ASHEVILLE"</span></span>
<span><span class="co">#&gt; $ addr_type   &lt;chr&gt; "Locality", "Locality"</span></span>
<span><span class="co">#&gt; $ type_field  &lt;chr&gt; "City", "City"</span></span>
<span><span class="co">#&gt; $ geometry    &lt;POINT [US_survey_foot]&gt; POINT (943428.1 681596.4), POINT (948500.3 631973.4)…</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=arcgisgeocode" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/r-arcgis/arcgisgeocode/" class="external-link">Browse source code</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>Apache License (&gt;= 2)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing arcgisgeocode</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Josiah Parry <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-9910-865X" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
<li><a href="https://CRAN.R-project.org/package=arcgisgeocode" class="external-link"><img src="https://www.r-pkg.org/badges/version/arcgisgeocode.png" alt="CRAN status"></a></li>
<li><a href="https://github.com/R-ArcGIS/arcgisgeocode/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/R-ArcGIS/arcgisgeocode/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Josiah Parry.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
